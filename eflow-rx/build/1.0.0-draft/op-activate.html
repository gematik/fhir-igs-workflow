<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Operation $activate (Task aktivieren) - E-Rezept für Arzneimittel v1.0.0-draft</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ig.gematik.css" rel="stylesheet" />
<script type="text/javascript" src="assets/js/ig.gematik.min.js"> </script>
<link href="assets/css/edge-dark.min.css" rel="stylesheet" />
<script type="text/javascript" src="assets/js/ig.api.doc.gematik.min.js"> </script>
<link href="assets/css/ig.req.gematik.css" rel="stylesheet" />
<script type="text/javascript" src="assets/js/ig.req.gematik.min.js"> </script>

<script type="text/javascript" src="assets/js/ig.bibliography.gematik.js"> </script>

<style>
    .gem-ig-headline-container {
        -webkit-background-size: 100% auto;
        -moz-background-size: 100% auto;
        -o-background-size: 100% auto;
        background-size: 100% auto;
        height: 280px;
        background-color: #2a6496;
        background: url('./e-rezept-img.png') no-repeat;
        background-position: 650px -150px;
        background-size: 45% auto;
    }
    .bubble-link {
        display: none;
        transition: opacity 0.2s;
        }

        h1:hover .bubble-link,
        h2:hover .bubble-link,
        h3:hover .bubble-link,
        h4:hover .bubble-link,
        h5:hover .bubble-link,
        h6:hover .bubble-link {
        display: inline;
        }
</style>

<script type="text/javascript" src="assets/js/heading-links.js"> </script>

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"8.2"}
    h3,h4,h5,h6{--heading-prefix:"8.2"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->

<div id="hl7-nav">
    <a id="gem-ig-logo" no-external="true" href="./index.html">
        <img height="50" alt="Home" src="assets/images/gem-logo.png"/>
    </a>
</div>


      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Start</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Fachlichkeit
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="menu-fachlichkeit-ueberblick.html">Überblick</a>
      </li>
      <li>
        <a href="menu-fachlichkeit-szenarien.html">Szenarien</a>
      </li>
      <li>
        <a href="menu-fachlichkeit-anwendungsfaelle.html">Anwendungsfälle</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Technische Umsetzung
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="menu-technische-umsetzung-systemueberblick.html">Systemüberblick</a>
      </li>
      <li>
        <a href="menu-technische-umsetzung-anwendungsfaelle.html">Technische Anwendungsfälle</a>
      </li>
      <li>
        <a href="menu-technische-umsetzung-verarbeitungsregeln.html">Verarbeitungsregeln</a>
      </li>
      <li>
        <a href="menu-technische-umsetzung-dosierung.html">Validierung von Dosierinformationen</a>
      </li>
      <li>
        <a href="mapping.html">Mappings</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Schnittstellen
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="menu-schnittstellen-generelle-prinzipien.html">Generelle Prinzipien</a>
      </li>
      <li>
        <a href="menu-schnittstellen-datenschutz-und-sicherheit.html">Datenschutz und Sicherheit</a>
      </li>
      <li>
        <a href="menu-schnittstellen-query-api.html">Query API</a>
      </li>
      <li>
        <a href="menu-schnittstellen-operation-api.html">Operation API</a>
      </li>
      <li>
        <a href="menu-schnittstellen-additional-api.html">Additional APIs</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">FHIR-Artefakte</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Anhänge
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="referenced.html">Referenzen</a>
      </li>
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
      <li>
        <a href="erp-openapi.html">OpenAPI</a>
      </li>
      <li>
        <a href="release-notes.html">Release Notes</a>
      </li>
      <li>
        <a href="spec-sheet.html">Steckbriefe</a>
      </li>
      <li>
        <a href="comparisons.html">Versionsvergleiche</a>
      </li>
      <li>
        <a href="license.html">Lizenz</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->

    <div class="segment"> 
      <div class="container">
        

<div class="gem-ig-headline-container"> 
    <div id="gem-ig-headline" class="col-lg-10 col-md-12">
        <div class="gem-ig-headline-title">
            
E-Rezept für Arzneimittel
        </div>
        <div id="ig-status" class="gem-ig-headline-subtitle">
            <span style="display:inline-block;">Version 1.0.0-draft - ci-build
                
                
            </span>
            

        </div>
    </div>
</div>
      </div>
    </div>

    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='menu-schnittstellen-operation-api.html'><b>Operation API</b></a></li><li><b>Operation $activate (Task aktivieren)</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">
<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  
  <h2>Operation $activate (Task aktivieren)</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
  <p>Seiteninhalt:</p>

<ul id="markdown-toc">
  <li><a href="#nachricht" id="markdown-toc-nachricht">Nachricht</a>    <ul>
      <li><a href="#auslösung" id="markdown-toc-auslösung">Auslösung</a></li>
      <li><a href="#fhir-operation-api" id="markdown-toc-fhir-operation-api">FHIR Operation API</a></li>
    </ul>
  </li>
  <li><a href="#geschäftslogik" id="markdown-toc-geschäftslogik">Geschäftslogik</a></li>
  <li><a href="#sicherheitsanforderungen" id="markdown-toc-sicherheitsanforderungen">Sicherheitsanforderungen</a></li>
</ul>

</div>
<p>Die FHIR-Operation <code class="language-plaintext highlighter-rouge">$activate</code> überführt einen im Status <code class="language-plaintext highlighter-rouge">draft</code> befindlichen <code class="language-plaintext highlighter-rouge">Task</code> in den Status <code class="language-plaintext highlighter-rouge">ready</code>, nachdem das Primärsystem den qualifiziert elektronisch signierten Verordnungsdatensatz (QES) übermittelt hat. Der E-Rezept-Fachdienst validiert dabei Identitäten, Flowtype-spezifische Inhalte sowie die Signatur und erzeugt anschließend serverseitige Nachweise und Downstream-Daten (z.B. ePA Medication Service, Push-Benachrichtigungen).</p>

<h2 id="nachricht">Nachricht</h2>

<p>Die Nachricht wird als HTTP <code class="language-plaintext highlighter-rouge">POST</code> an <code class="language-plaintext highlighter-rouge">/Task/{id}/$activate</code> gesendet und enthält den PKCS#7-kapselten QES-Datensatz als <code class="language-plaintext highlighter-rouge">Parameters</code>-Ressource. Der Aufruf MUSS den AccessCode im Header <code class="language-plaintext highlighter-rouge">X-AccessCode</code> oder als URL-Parameter <code class="language-plaintext highlighter-rouge">ac</code> übermitteln und darf nur erfolgen, solange der <code class="language-plaintext highlighter-rouge">Task.status = draft</code> ist ([gemSpec_FD_eRp#A_19114], [A_19128]).</p>

<h3 id="auslösung">Auslösung</h3>

<p>Das Primärsystem (PVS/KIS) ruft <code class="language-plaintext highlighter-rouge">$activate</code> unmittelbar nach der QES-Erzeugung auf. Grundlage ist die zuvor erhaltene PrescriptionID. Vor dem Versand MUSS das System sicherstellen, dass alle Pflichtangaben (u.a. KVNR, Coverage, Medication, Flowtype, PerformerType) vollständig sind und der Workflow zum Ziel passt.</p>

<h3 id="fhir-operation-api">FHIR Operation API</h3>

<p><strong>Serverpflichten gemäß gemSpec_FD_eRp Kap. 6.1.2.2</strong></p>

<h4 id="allgemeine-anforderungen-der-operation">Allgemeine Anforderungen der Operation</h4>

<h5 id="vorbedingungen-und-transport">Vorbedingungen und Transport</h5>

<requirement conformance="SHALL" key="IG-ERP-62" title="E-Rezept-Fachdienst - Task aktivieren - Task nach Aktivierung bereitstellen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei erfolgreichem `$activate` den adressierten Task in den Status <i>ready</i> überführen und die aktualisierte Ressource im Response zurückgeben.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-63" title="E-Rezept-Fachdienst - Task aktivieren - PKCS#7-Parameter prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS den übergebenen QES-Datensatz als Enveloping CAdES PKCS#7 entgegennehmen und bei fehlender bzw. ungültiger ASN.1-Struktur die Operation mit HTTP 400 abbrechen.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-64" title="E-Rezept-Fachdienst - Task aktivieren - Prüfung AccessCode Rezept aktualisieren" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS vor jeder Aktivierung den bereitgestellten AccessCode aus HTTP-Header <i>X-AccessCode</i> bzw. Parameter <i>ac</i> mit dem im Task gespeicherten Wert vergleichen und den Aufruf bei Abweichung oder fehlender Angabe mit HTTP 403 abbrechen.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-65" title="E-Rezept-Fachdienst - Task aktivieren - Brute-Force-Drosselung für AccessCodes" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei fehlenden oder ungültigen AccessCodes den Aufruf mit HTTP 403 abbrechen, den `Warning`-Header zur Brute-Force-Drosselung setzen und die nächste mögliche Aktivierung künstlich verzögern.
</requirement>

<h5 id="signatur--und-payload-validierung">Signatur- und Payload-Validierung</h5>

<requirement conformance="SHALL" key="IG-ERP-66" title="E-Rezept-Fachdienst - Task aktivieren - Signaturzertifikat des HBA validieren" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS das QES-Signaturzertifikat C.HP.QES gemäß gemSpec_PKI (inklusive OCSP-Prüfung) validieren und bei fehlgeschlagener Online-Prüfung den Aufruf mit HTTP 512 beenden.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-67" title="E-Rezept-Fachdienst - Task aktivieren - QES und KBV-Bundle validieren" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS die qualifizierte Signatur prüfen, das eingebettete FHIR-Bundle gegen `kbv.ita.erp` bzw. `kbv.itv.evdga` validieren und den PKCS#7-Datensatz sicher speichern; Fehler sind mit HTTP 400 zu quittieren.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-68" title="E-Rezept-Fachdienst - Task aktivieren - Signatur-MimeType prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS den MimeType des signierten Dokuments auf <i>text/plain; charset=utf-8</i> prüfen und bei Abweichungen mit HTTP 400 abbrechen.
</requirement>

<h5 id="ableitungen-und-folgeverarbeitung">Ableitungen und Folgeverarbeitung</h5>

<requirement conformance="SHALL" key="IG-ERP-69" title="E-Rezept-Fachdienst - Task aktivieren - PerformerType aus Flowtype ableiten" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS beim Aktivieren eines Tasks das Feld <i>Task.performerType</i> anhand der Prozessparameter des Flowtypes befüllen.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-70" title="E-Rezept-Fachdienst - Task aktivieren - KVNR in Task.for übernehmen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS die KVNR aus <i>Patient.identifier</i> (System `http://fhir.de/sid/gkv/kvid-10`) in <i>Task.for</i> übernehmen, damit die Patientenreferenz im Workflow eindeutig ist.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-71" title="E-Rezept-Fachdienst - Task aktivieren - Verordnungsdaten für ePA Medication Service bereitstellen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS nach erfolgreichem `$activate` die Verordnungsdaten für den ePA Medication Service vorbereiten.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-72" title="E-Rezept-Fachdienst - Task aktivieren - Push Notification erp.task.activate auslösen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei erfolgreicher Aktivierung den Push-Trigger <i>erp.task.activate</i> für die KVNR aus <i>Task.for</i> starten.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-73" title="E-Rezept-Fachdienst - Task aktivieren - Serversigniertes Bundle erzeugen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS das QES-Bundle normalisieren, mit ID.FD.OSIG als detached JWS signieren und das Ergebnis als Dokumenttyp 2 in <i>Task.input</i> referenzieren.
</requirement>

<h4 id="identifikations--und-prüfziffern">Identifikations- und Prüfziffern</h4>

<h5 id="kostenträger-iknr">Kostenträger (IKNR)</h5>

<requirement conformance="SHALL" key="IG-ERP-74" title="E-Rezept-Fachdienst - Task aktivieren - IKNR der Krankenkasse prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS beim Aktivieren den Wert <i>Coverage.payor.identifier.value</i> gemäß IK-Prüfziffervalidierung kontrollieren und bei Fehlern HTTP 400 mit der definierten Meldung liefern.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-75" title="E-Rezept-Fachdienst - Task aktivieren - Alternative IKNR prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei vorhandenem Wert in <i>Coverage.payor.identifier.extension:alternativeID</i> prüfen, dass dieser das IK-Prüfzifferverfahren besteht; andernfalls ist die Operation mit HTTP 400 abzulehnen.
</requirement>

<h5 id="leistungserbringer-lanrzanr">Leistungserbringer (LANR/ZANR)</h5>

<requirement conformance="SHALL" key="IG-ERP-76" title="E-Rezept-Fachdienst - Task aktivieren - ANR/ZANR prüfen und bei Konfiguration Fehler abbrechen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS, wenn die Prüfung der LANR/ZANR eine Auffälligkeit erkennt und die Konfiguration auf „Fehler“ gestellt ist, mit HTTP 400 abbrechen und den angegebenen Fehlertest liefern.
</requirement>

<h5 id="arzneimittel-pzn">Arzneimittel (PZN)</h5>

<requirement conformance="SHALL" key="IG-ERP-77" title="E-Rezept-Fachdienst - Task aktivieren - PZN in KBV_PR_ERP_Medication_PZN validieren" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS die PZN in <i>KBV_PR_ERP_Medication_PZN</i> gemäß Prüfziffer berechnen und bei Ungültigkeit HTTP 400 mit der vorgesehenen Meldung zurückgeben.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-78" title="E-Rezept-Fachdienst - Task aktivieren - PZN in Rezepturen prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS auch für <i>KBV_PR_ERP_Medication_Compounding</i> die PZN-Prüfziffer kontrollieren und bei Fehlern die Operation beenden.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-79" title="E-Rezept-Fachdienst - Task aktivieren - PZN-Länge prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass jede übergebene PZN exakt achtstellig ist, andernfalls ist HTTP 400 mit dem Hinweis „Länge PZN unzulässig“ zurückzugeben.
</requirement>

<h5 id="patient-kvnr">Patient (KVNR)</h5>

<requirement conformance="SHALL" key="IG-ERP-80" title="E-Rezept-Fachdienst - Task aktivieren - Patientenidentifier als KVNR erzwingen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass in der Patient-Ressource der Identifier das System `http://fhir.de/sid/gkv/kvid-10` verwendet; bei Abweichung ist HTTP 400 mit der entsprechenden Fehlermeldung zu liefern.
</requirement>

<h5 id="datums--und-konsistenzprüfungen">Datums- und Konsistenzprüfungen</h5>

<requirement conformance="SHALL" key="IG-ERP-81" title="E-Rezept-Fachdienst - Task aktivieren - AuthoredOn und Signaturdatum abgleichen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass <i>MedicationRequest.authoredOn</i> und das Signaturdatum aus dem QES taggleich sind; bei Abweichungen ist HTTP 400 mit dem vorgesehenen Hinweis zurückzugeben.
</requirement>

<h4 id="flowtype-spezifische-anforderungen">Flowtype-spezifische Anforderungen</h4>

<h5 id="flowtypes-160169200209-zulässige-berufsgruppen-für-qes">Flowtypes 160/169/200/209: Zulässige Berufsgruppen für QES</h5>

<requirement conformance="SHALL" key="IG-ERP-82" title="E-Rezept-Fachdienst - Task aktivieren - QES für Flowtype 160/169/200/209 nur durch berechtigte Berufsgruppen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS für Flowtypes 160, 169, 200 und 209 prüfen, dass die QES von einer zulässigen professionOID (z.B. <i>oid_arzt</i>, <i>oid_zahnarzt</i>) stammt und bei unzulässigen Berufsgruppen mit HTTP 400 abbrechen.
</requirement>

<h5 id="flowtype-166-t-rezept-spezifische-payload-prüfung">Flowtype 166: T-Rezept-spezifische Payload-Prüfung</h5>

<requirement conformance="SHALL" key="IG-ERP-83" title="E-Rezept-Fachdienst - Task aktivieren - T-Rezept-spezifische Payload-Prüfung" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei Flowtype 166 sicherstellen, dass das Bundle eine <i>MedicationRequest</i> plus eine <i>Medication</i> mit Kategorie 02 enthält; andernfalls ist HTTP 400 mit dem entsprechenden Fehlertext zu liefern.
</requirement>

<h5 id="coverage-type-gkv--und-pkv-workflows">Coverage-Type: GKV- und PKV-Workflows</h5>

<requirement conformance="SHALL" key="IG-ERP-86" title="E-Rezept-Fachdienst - Task aktivieren - Coverage-Type für GKV-Workflows" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass bei Flowtypes 160, 162 und 169 <i>Coverage.type.coding.code</i> nicht den Wert <i>PKV</i> enthält; Verstöße führen zu HTTP 400.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-87" title="E-Rezept-Fachdienst - Task aktivieren - Coverage-Type für PKV-Workflows" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS für Flowtypes 200 und 209 sicherstellen, dass der Coverage-Typ den Wert <i>PKV</i> enthält; andernfalls ist die Operation abzulehnen.
</requirement>

<h5 id="allgemeine-inhaltsausschlüsse">Allgemeine Inhaltsausschlüsse</h5>

<requirement conformance="SHALL" key="IG-ERP-88" title="E-Rezept-Fachdienst - Task aktivieren - Betäubungsmittel ausschließen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS `$activate` mit dem Fehler „BTM nicht zulässig“ abbrechen, wenn das Bundle <i>Medication.extension:KBV_EX_ERP_Medication_Category = 01</i> enthält.
</requirement>

<h5 id="ableitungen-aus-flowtype-eu-einlösbarkeit">Ableitungen aus Flowtype (EU-Einlösbarkeit)</h5>

<requirement conformance="SHALL" key="IG-ERP-90" title="E-Rezept-Fachdienst - Task aktivieren - Einlösbarkeit im EU-Ausland kennzeichnen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS <i>Task.extension:eu-isRedeemableByProperties</i> auf „true“ setzen, wenn Flowtype 160 oder 200 mit PZN-Verordnung vorliegt, und ansonsten auf „false“.
</requirement>

<h4 id="anforderungen-für-mehrfachverordnungen">Anforderungen für Mehrfachverordnungen</h4>

<h5 id="flowtype-zulässigkeit">Flowtype-Zulässigkeit</h5>

<requirement conformance="SHALL" key="IG-ERP-91" title="E-Rezept-Fachdienst - Task aktivieren - Zulässige Flowtypes für Mehrfachverordnungen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei <i>Mehrfachverordnung.kennzeichen = true</i> sicherstellen, dass der Flowtype 160, 169, 200 oder 209 beträgt; anderenfalls ist HTTP 400 zurückzugeben.
</requirement>

<h5 id="zählwerte-numeratordenominator">Zählwerte (Numerator/Denominator)</h5>

<requirement conformance="SHALL" key="IG-ERP-92" title="E-Rezept-Fachdienst - Task aktivieren - Maximal vier Teilverordnungen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS Numerator und Denominator auf Werte ≤ 4 prüfen und bei Überschreitung mit HTTP 400 abbrechen.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-93" title="E-Rezept-Fachdienst - Task aktivieren - Numerator größer 0" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei Mehrfachverordnungen sicherstellen, dass der Numerator mindestens 1 ist; ansonsten ist die Operation unzulässig.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-94" title="E-Rezept-Fachdienst - Task aktivieren - Denominator mindestens 2" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass der Denominator ≥ 2 ist, da Mehrfachverordnungen aus mindestens zwei Teilen bestehen.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-95" title="E-Rezept-Fachdienst - Task aktivieren - Numerator darf Denominator nicht überschreiten" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass Numerator ≤ Denominator ist; andernfalls ist HTTP 400 zurückzugeben.
</requirement>

<h5 id="ausschlüsse-und-konsistenzregeln">Ausschlüsse und Konsistenzregeln</h5>

<requirement conformance="SHALL" key="IG-ERP-96" title="E-Rezept-Fachdienst - Task aktivieren - Keine MVO-Extensions bei normalen Verordnungen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS `$activate` mit HTTP 400 beenden, wenn eine Verordnung MVO-Extensions enthält, obwohl das Kennzeichen = false ist.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-97" title="E-Rezept-Fachdienst - Task aktivieren - Keine Kombination mit Entlass- oder Ersatzverordnung" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS den Aufruf mit HTTP 400 abweisen, wenn eine Verordnung als Mehrfachverordnung und gleichzeitig als Entlassrezept (Rechtsgrundlage 04/14) oder als Ersatzverordnung (Rechtsgrundlage 10/11/17) gekennzeichnet ist.
</requirement>

<h5 id="zeitraum-und-id-schema">Zeitraum und ID-Schema</h5>

<requirement conformance="SHALL" key="IG-ERP-98" title="E-Rezept-Fachdienst - Task aktivieren - Beginn der Einlösefrist Pflicht" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS bei Mehrfachverordnungen sicherstellen, dass <i>Mehrfachverordnung.Zeitraum.start</i> gesetzt ist; fehlt der Wert, ist die Aktivierung mit HTTP 400 zu beenden.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-99" title="E-Rezept-Fachdienst - Task aktivieren - Enddatum darf Startdatum nicht unterschreiten" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass ein angegebenes Enddatum ≥ Startdatum ist; sonst ist die Operation ungültig.
</requirement>

<requirement conformance="SHALL" key="IG-ERP-100" title="E-Rezept-Fachdienst - Task aktivieren - ID-Schema für Mehrfachverordnungen prüfen" version="0">
  <meta lockversion="false" />
  <actor name="E-Rezept-Fachdienst">
    <testProcedure id="Produkttest" />
  </actor>
  Der E-Rezept-Fachdienst MUSS sicherstellen, dass die ID in <i>Mehrfachverordnung.ID.valueIdentifier</i> dem in der KBV-Technischen Anlage definierten Schema entspricht; Abweichungen führen zu HTTP 400.
</requirement>

<div class="gematik-api" data-api-type="FHIROperation" data-api-fhir-invoke-level="instance" data-api-operation-id="activateTask">
  <div id="CapabilityStatement">
    <pre>
      {"resourceType":"CapabilityStatement","id":"erp-fachdienst-server","meta":{"profile":["https://gematik.de/fhir/ti/StructureDefinition/ti-capability-statement"]},"extension":[{"url":"https://gematik.de/fhir/ti/StructureDefinition/extension-base-url","valueString":"http://todo"},{"extension":[{"url":"statusCode","valueString":"423"},{"url":"description","valueString":"If the insurant objected to the medication process or objected to the submission of prescription and dispensation data into the ePA system, the Medication Service is locked."},{"url":"responseType","valueString":"application/json"},{"url":"errorCode","valueString":"locked"}],"url":"https://gematik.de/fhir/ti/StructureDefinition/extension-http-response-info"}],"url":"https://gematik.de/fhir/erp/CapabilityStatement/erp-fachdienst-server","version":"1.0.0-draft","name":"ERPFachdienstServer","title":"ERP CapabilityStatement für den E-Rezept-Fachdienst","status":"draft","date":"2025-12-15","publisher":"gematik GmbH","contact":[{"name":"gematik GmbH","telecom":[{"system":"url","value":"https://gematik.de"},{"system":"email","value":"erp-umsetzung@gematik.de"}]}],"description":"ERP CapabilityStatement für den E-Rezept-Fachdienst","jurisdiction":[{"coding":[{"system":"urn:iso:std:iso:3166","code":"DE","display":"Germany"}]}],"kind":"requirements","fhirVersion":"4.0.1","format":["application/fhir+json","application/fhir+xml"],"rest":[{"mode":"server"}]}
    </pre>
  </div>
  <div id="OperationDefinition">
    <pre>
      {"resourceType":"OperationDefinition","id":"ActivateOperation","text":{"status":"generated","div":"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p class=\"res-header-id\"&gt;<b>Generated Narrative: OperationDefinition ActivateOperation</b>&lt;/p&gt;&lt;a name=\"ActivateOperation\"&gt; &lt;/a&gt;&lt;a name=\"hcActivateOperation\"&gt; &lt;/a&gt;<p>URL: [base]/Task/[id]/$activate</p><p>Input parameters Profile:&lt;a href=\"http://hl7.org/fhir/R4/parameters.html\"&gt;Parameters&lt;/a&gt;</p><p>Output parameters Profile:&lt;a href=\"StructureDefinition-eflow-rx-activate-operation-output-parameters.html\"&gt;GEM ERP PR ActivateOperation Output&lt;/a&gt;</p><h3>Parameters</h3>&lt;table class=\"grid\"&gt;<tr><td><b>Use</b></td><td><b>Name</b></td><td><b>Scope</b></td><td><b>Cardinality</b></td><td><b>Type</b></td><td><b>Binding</b></td><td><b>Documentation</b></td></tr><tr><td>IN</td><td>ePrescription</td><td /><td>1..1</td><td>&lt;a href=\"http://hl7.org/fhir/R4/binary.html\"&gt;Binary&lt;/a&gt;</td><td /><td><div><p>Das qualifizierte unterzeichnete Verordnung (QES) zur Aktivierung des E-Rezept-Workflows.</p>\n</div></td></tr><tr><td>OUT</td><td>return</td><td /><td>1..1</td><td>&lt;a href=\"http://hl7.org/fhir/R4/task.html\"&gt;Task&lt;/a&gt;</td><td /><td><div><p>Geben Sie die aktualisierte und aktivierte Aufgabe zurück.</p>\n</div></td></tr>&lt;/table&gt;&lt;/div&gt;"},"url":"https://gematik.de/fhir/erp/OperationDefinition/ActivateOperation","version":"1.0.0-draft","name":"Activate","status":"draft","kind":"operation","date":"2025-12-15","publisher":"gematik GmbH","contact":[{"name":"gematik GmbH","telecom":[{"system":"url","value":"https://gematik.de"},{"system":"email","value":"erp-umsetzung@gematik.de"}]}],"description":"Diese Operation aktiviert die erstellte Aufgabe für das Rezept. Der Eingabeparameter muss das qualifizierte signierte Bundle des Rezepts enthalten. Der E-Rezept-Fachdienst validiert das Rezept, aktualisiert die Task-ressource und startet den Workflow.","jurisdiction":[{"coding":[{"system":"urn:iso:std:iso:3166","code":"DE","display":"Germany"}]}],"affectsState":true,"code":"activate","resource":["Task"],"system":false,"type":false,"instance":true,"inputProfile":"http://hl7.org/fhir/StructureDefinition/Parameters","outputProfile":"https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-activate-operation-output-parameters","parameter":[{"name":"ePrescription","use":"in","min":1,"max":"1","documentation":"Das qualifizierte unterzeichnete Verordnung (QES) zur Aktivierung des E-Rezept-Workflows.","type":"Binary"},{"name":"return","use":"out","min":1,"max":"1","documentation":"Geben Sie die aktualisierte und aktivierte Aufgabe zurück.","type":"Task"}]}
    </pre>
  </div>
  <div id="Request-Examples">
    <div data-name="application/fhir+json" data-type="JSON" data-render="ig-Fragment">
      <pre class="json" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-json" style="white-space: pre; text-wrap: nowrap;">{
  "<a href="http://hl7.org/fhir/R4/parameters.html#Parameters">resourceType</a>" : "Parameters",
  "<a href="http://hl7.org/fhir/R4/resource.html#Parameters.id">id</a>" : "ExampleOperationActivateParametersInput",
  "<a href="http://hl7.org/fhir/R4/parameters.html#Parameters.parameter">parameter</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/parameters.html#Parameters.parameter.name">name</a>" : "ePrescription",
      "<a href="http://hl7.org/fhir/R4/binary.html#Binary">resource</a>" : {
        "<a href="http://hl7.org/fhir/R4/binary.html">resourceType</a>" : "Binary",
        "<a href="http://hl7.org/fhir/R4/resource.html#Binary.id">id</a>" : "PrescriptionBinary",
        "<a href="http://hl7.org/fhir/R4/binary.html#Binary.contentType">contentType</a>" : "application/pkcs7-mime",
        "<a href="http://hl7.org/fhir/R4/binary.html#Binary.data">data</a>" : "dGhpcyBibG9iIGlzIHNuaXBwZWQ="
      }
    }
  ]
}</code></pre>

    </div>
    <div data-name="application/fhir+xml" data-type="XML" data-render="ig-Fragment">
      <pre class="xml" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-xml" style="white-space: pre; text-wrap: nowrap;">
&lt;<a href="http://hl7.org/fhir/R4/parameters.html#Parameters">Parameters</a> xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;<a href="http://hl7.org/fhir/R4/resource.html#Parameters.id">id</a> <a href="http://hl7.org/fhir/R4/datatypes.html#id">value</a>=&quot;ExampleOperationActivateParametersInput&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/parameters.html#Parameters.parameter">parameter</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/parameters.html#Parameters.parameter.name">name</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;ePrescription&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/binary.html#Binary">resource</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/binary.html#Binary">Binary</a>&gt;
        &lt;<a href="http://hl7.org/fhir/R4/resource.html#Binary.id">id</a> <a href="http://hl7.org/fhir/R4/datatypes.html#id">value</a>=&quot;PrescriptionBinary&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/binary.html#Binary.contentType">contentType</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;application/pkcs7-mime&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/binary.html#Binary.data">data</a> <a href="http://hl7.org/fhir/R4/datatypes.html#base64Binary">value</a>=&quot;dGhpcyBibG9iIGlzIHNuaXBwZWQ=&quot;/&gt;
      &lt;/<a href="http://hl7.org/fhir/R4/binary.html#Binary">Binary</a>&gt;
    &lt;/resource&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/parameters.html#Parameters.parameter">parameter</a>&gt;
&lt;/<a href="http://hl7.org/fhir/R4/parameters.html#Parameters">Parameters</a>&gt;</code></pre>

    </div>
  </div>
  <div id="Response-Examples">
    <div data-name="application/fhir+json" data-type="JSON" data-render="ig-Fragment">
      <pre class="json" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-json" style="white-space: pre; text-wrap: nowrap;">{
  "<a href="http://hl7.org/fhir/R4/task.html#Task">resourceType</a>" : "Task",
  "<a href="http://hl7.org/fhir/R4/resource.html#Task.id">id</a>" : "607255ed-ce41-47fc-aad3-cfce1c39963f",
  "<a href="http://hl7.org/fhir/R4/resource.html#Task.meta">meta</a>" : {
    "<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>" : [
      <a href="StructureDefinition-eflow-rx-task.html" style="color: Maroon">&#x1F517;</a> "https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-task"
    ],
    "<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.tag">tag</a>" : [
      {
        "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>" : "Task in READY state activated by (Z)PVS/KIS via $activate operation"
      }
    ]
  },
  "<a href="http://hl7.org/fhir/R4/domainresource.html#Task.text">text</a>" : {
    "<a href="http://hl7.org/fhir/R4/datatypes.html#Narrative#Narrative.status">status</a>" : "extensions",
    "<a href="http://hl7.org/fhir/R4/datatypes.html#Narrative#Narrative.div">div</a>" : "&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;p class=\&quot;res-header-id\&quot;&gt;&lt;b&gt;Generated Narrative: Task 607255ed-ce41-47fc-aad3-cfce1c39963f&lt;/b&gt;&lt;/p&gt;&lt;a name=\&quot;607255ed-ce41-47fc-aad3-cfce1c39963f\&quot;&gt; &lt;/a&gt;&lt;a name=\&quot;hc607255ed-ce41-47fc-aad3-cfce1c39963f\&quot;&gt; &lt;/a&gt;&lt;div style=\&quot;display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%\&quot;&gt;&lt;p style=\&quot;margin-bottom: 0px\&quot;/&gt;&lt;p style=\&quot;margin-bottom: 0px\&quot;&gt;Profile: &lt;a href=\&quot;StructureDefinition-eflow-rx-task.html\&quot;&gt;GEM ERP PR Task&lt;/a&gt;&lt;/p&gt;&lt;p style=\&quot;margin-bottom: 0px\&quot;&gt;Tag: Task in READY state activated by (Z)PVS/KIS via $activate operation (Details: [not stated] code null = 'Task in READY state activated by (Z)PVS/KIS via $activate operation')&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX PrescriptionType&lt;/b&gt;: EFlowRxFlowType: 160 (Flowtype für Apothekenpflichtige Arzneimittel)&lt;/p&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX AcceptDate&lt;/b&gt;: 2026-07-01&lt;/p&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX ExpiryDate&lt;/b&gt;: 2026-07-01&lt;/p&gt;&lt;p&gt;&lt;b&gt;identifier&lt;/b&gt;: &lt;code&gt;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_PrescriptionId&lt;/code&gt;/160.000.033.491.280.78, &lt;code&gt;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_AccessCode&lt;/code&gt;/777bea0e13cc9c42ceec14aec3ddee2263325dc2c6c699db115f58fe423607ea&lt;/p&gt;&lt;p&gt;&lt;b&gt;status&lt;/b&gt;: Ready&lt;/p&gt;&lt;p&gt;&lt;b&gt;intent&lt;/b&gt;: order&lt;/p&gt;&lt;p&gt;&lt;b&gt;for&lt;/b&gt;: Identifier: NamingSystemKVID/X123456789&lt;/p&gt;&lt;p&gt;&lt;b&gt;authoredOn&lt;/b&gt;: 2026-07-01 15:29:00+0000&lt;/p&gt;&lt;p&gt;&lt;b&gt;lastModified&lt;/b&gt;: 2026-07-01 16:44:00+0000&lt;/p&gt;&lt;p&gt;&lt;b&gt;performerType&lt;/b&gt;: &lt;span title=\&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxOrganizationType urn:oid:1.2.276.0.76.4.54}\&quot;&gt;Öffentliche Apotheke&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;input&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt;: &lt;span title=\&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType 1}\&quot;&gt;Health Care Provider Prescription&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;value&lt;/b&gt;: &lt;a href=\&quot;https://simplifier.net/resolve?scope=de.basisprofil.r4@1.5.4&amp;amp;canonical=http://fhir.org/packages/de.basisprofil.r4/281a985c-f25b-4aae-91a6-41ad744080b0\&quot;&gt;281a985c-f25b-4aae-91a6-41ad744080b0&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;input&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt;: &lt;span title=\&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType 2}\&quot;&gt;Patient Confirmation&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;value&lt;/b&gt;: &lt;a href=\&quot;https://simplifier.net/resolve?scope=de.basisprofil.r4@1.5.4&amp;amp;canonical=http://fhir.org/packages/de.basisprofil.r4/f8c2298f-7c00-4a68-af29-8a2862d55d43\&quot;&gt;f8c2298f-7c00-4a68-af29-8a2862d55d43&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;"
  },
  "<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.url">url</a>" : "https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-prescriptiontype-extension",
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueCoding</a>" : {
        "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>" : "https://gematik.de/fhir/erp/CodeSystem/EFlowRxFlowType",
        "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a>" : "160",
        "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>" : "Flowtype für Apothekenpflichtige Arzneimittel"
      }
    },
    {
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.url">url</a>" : "https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-acceptdate-extension",
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueDate</a>" : "2026-07-01"
    },
    {
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.url">url</a>" : "https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-expirydate-extension",
      "<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueDate</a>" : "2026-07-01"
    }
  ],
  "<a href="http://hl7.org/fhir/R4/task.html#Task.identifier">identifier</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a>" : "https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_PrescriptionId",
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a>" : "160.000.033.491.280.78"
    },
    {
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a>" : "https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_AccessCode",
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a>" : "777bea0e13cc9c42ceec14aec3ddee2263325dc2c6c699db115f58fe423607ea"
    }
  ],
  "<a href="http://hl7.org/fhir/R4/task.html#Task.status">status</a>" : "ready",
  "<a href="http://hl7.org/fhir/R4/task.html#Task.intent">intent</a>" : "order",
  "<a href="http://hl7.org/fhir/R4/task.html#Task.for">for</a>" : {
    "<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.identifier">identifier</a>" : {
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a>" : "http://fhir.de/sid/gkv/kvid-10",
      "<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a>" : "X123456789"
    }
  },
  "<a href="http://hl7.org/fhir/R4/task.html#Task.authoredOn">authoredOn</a>" : "2026-07-01T15:29:00+00:00",
  "<a href="http://hl7.org/fhir/R4/task.html#Task.lastModified">lastModified</a>" : "2026-07-01T16:44:00.434+00:00",
  "<a href="http://hl7.org/fhir/R4/task.html#Task.performerType">performerType</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>" : [
        {
          "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>" : "https://gematik.de/fhir/erp/CodeSystem/EFlowRxOrganizationType",
          "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a>" : "urn:oid:1.2.276.0.76.4.54",
          "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>" : "Öffentliche Apotheke"
        }
      ]
    }
  ],
  "<a href="http://hl7.org/fhir/R4/task.html#Task.input">input</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>" : {
        "<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>" : [
          {
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>" : "https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType",
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a>" : "1",
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>" : "Health Care Provider Prescription"
          }
        ]
      },
      "<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>" : {
        "<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.reference">reference</a>" : "281a985c-f25b-4aae-91a6-41ad744080b0"
      }
    },
    {
      "<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>" : {
        "<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>" : [
          {
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>" : "https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType",
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a>" : "2",
            "<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>" : "Patient Confirmation"
          }
        ]
      },
      "<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>" : {
        "<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.reference">reference</a>" : "f8c2298f-7c00-4a68-af29-8a2862d55d43"
      }
    }
  ]
}</code></pre>

    </div>
    <div data-name="application/fhir+xml" data-type="XML" data-render="ig-Fragment">
      <pre class="xml" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-xml" style="white-space: pre; text-wrap: nowrap;">
&lt;<a href="http://hl7.org/fhir/R4/task.html#Task">Task</a> xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;<a href="http://hl7.org/fhir/R4/resource.html#Task.id">id</a> <a href="http://hl7.org/fhir/R4/datatypes.html#id">value</a>=&quot;607255ed-ce41-47fc-aad3-cfce1c39963f&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/resource.html#Task.meta">meta</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.profile">profile</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#canonical">value</a>=&quot;https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-task&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.tag">tag</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a>
               <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Task in READY state activated by (Z)PVS/KIS via $activate operation&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/datatypes.html#Meta#Meta.tag">tag</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/resource.html#Task.meta">meta</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/domainresource.html#Task.text">text</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Narrative#Narrative.status">status</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;extensions&quot;/&gt;
    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p class=&quot;res-header-id&quot;&gt;&lt;b&gt;Generated Narrative: Task 607255ed-ce41-47fc-aad3-cfce1c39963f&lt;/b&gt;&lt;/p&gt;&lt;a name=&quot;607255ed-ce41-47fc-aad3-cfce1c39963f&quot;&gt; &lt;/a&gt;&lt;a name=&quot;hc607255ed-ce41-47fc-aad3-cfce1c39963f&quot;&gt; &lt;/a&gt;&lt;div style=&quot;display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%&quot;&gt;&lt;p style=&quot;margin-bottom: 0px&quot;/&gt;&lt;p style=&quot;margin-bottom: 0px&quot;&gt;Profile: &lt;a href=&quot;StructureDefinition-eflow-rx-task.html&quot;&gt;GEM ERP PR Task&lt;/a&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0px&quot;&gt;Tag: Task in READY state activated by (Z)PVS/KIS via $activate operation (Details: [not stated] code null = 'Task in READY state activated by (Z)PVS/KIS via $activate operation')&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX PrescriptionType&lt;/b&gt;: EFlowRxFlowType: 160 (Flowtype für Apothekenpflichtige Arzneimittel)&lt;/p&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX AcceptDate&lt;/b&gt;: 2026-07-01&lt;/p&gt;&lt;p&gt;&lt;b&gt;GEM ERP EX ExpiryDate&lt;/b&gt;: 2026-07-01&lt;/p&gt;&lt;p&gt;&lt;b&gt;identifier&lt;/b&gt;: &lt;code&gt;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_PrescriptionId&lt;/code&gt;/160.000.033.491.280.78, &lt;code&gt;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_AccessCode&lt;/code&gt;/777bea0e13cc9c42ceec14aec3ddee2263325dc2c6c699db115f58fe423607ea&lt;/p&gt;&lt;p&gt;&lt;b&gt;status&lt;/b&gt;: Ready&lt;/p&gt;&lt;p&gt;&lt;b&gt;intent&lt;/b&gt;: order&lt;/p&gt;&lt;p&gt;&lt;b&gt;for&lt;/b&gt;: Identifier: NamingSystemKVID/X123456789&lt;/p&gt;&lt;p&gt;&lt;b&gt;authoredOn&lt;/b&gt;: 2026-07-01 15:29:00+0000&lt;/p&gt;&lt;p&gt;&lt;b&gt;lastModified&lt;/b&gt;: 2026-07-01 16:44:00+0000&lt;/p&gt;&lt;p&gt;&lt;b&gt;performerType&lt;/b&gt;: &lt;span title=&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxOrganizationType urn:oid:1.2.276.0.76.4.54}&quot;&gt;Öffentliche Apotheke&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;input&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt;: &lt;span title=&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType 1}&quot;&gt;Health Care Provider Prescription&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;value&lt;/b&gt;: &lt;a href=&quot;https://simplifier.net/resolve?scope=de.basisprofil.r4@1.5.4&amp;amp;canonical=http://fhir.org/packages/de.basisprofil.r4/281a985c-f25b-4aae-91a6-41ad744080b0&quot;&gt;281a985c-f25b-4aae-91a6-41ad744080b0&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;input&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt;: &lt;span title=&quot;Codes:{https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType 2}&quot;&gt;Patient Confirmation&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;value&lt;/b&gt;: &lt;a href=&quot;https://simplifier.net/resolve?scope=de.basisprofil.r4@1.5.4&amp;amp;canonical=http://fhir.org/packages/de.basisprofil.r4/f8c2298f-7c00-4a68-af29-8a2862d55d43&quot;&gt;f8c2298f-7c00-4a68-af29-8a2862d55d43&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;<a name="end-xhtml"></a>
  &lt;/<a href="http://hl7.org/fhir/R4/domainresource.html#Task.text">text</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#uri">url</a>=&quot;https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-prescriptiontype-extension&quot;&gt;
    &lt;<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueCoding</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a> <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/CodeSystem/EFlowRxFlowType&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;160&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Flowtype für Apothekenpflichtige Arzneimittel&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueCoding</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#uri">url</a>=&quot;https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-acceptdate-extension&quot;&gt;
    &lt;<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueDate</a> <a href="http://hl7.org/fhir/R4/datatypes.html#date">value</a>=&quot;2026-07-01&quot;/&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>
             <a href="http://hl7.org/fhir/R4/datatypes.html#uri">url</a>=&quot;https://gematik.de/fhir/erp/StructureDefinition/eflow-rx-expirydate-extension&quot;&gt;
    &lt;<a href="http://hl7.org/fhir/R4/extensibility.html#Extension#Extension.value_x_">valueDate</a> <a href="http://hl7.org/fhir/R4/datatypes.html#date">value</a>=&quot;2026-07-01&quot;/&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/domainresource.html#Task.extension">extension</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.identifier">identifier</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a>
            <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_PrescriptionId&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;160.000.033.491.280.78&quot;/&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.identifier">identifier</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.identifier">identifier</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a>
            <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/NamingSystem/GEM_ERP_NS_AccessCode&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a>
           <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;777bea0e13cc9c42ceec14aec3ddee2263325dc2c6c699db115f58fe423607ea&quot;/&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.identifier">identifier</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.status">status</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;ready&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.intent">intent</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;order&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.for">for</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.identifier">identifier</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.system">system</a> <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;http://fhir.de/sid/gkv/kvid-10&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Identifier#Identifier.value">value</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;X123456789&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.identifier">identifier</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.for">for</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.authoredOn">authoredOn</a> <a href="http://hl7.org/fhir/R4/datatypes.html#dateTime">value</a>=&quot;2026-07-01T15:29:00+00:00&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.lastModified">lastModified</a> <a href="http://hl7.org/fhir/R4/datatypes.html#dateTime">value</a>=&quot;2026-07-01T16:44:00.434+00:00&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.performerType">performerType</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>
              <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/CodeSystem/EFlowRxOrganizationType&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;urn:oid:1.2.276.0.76.4.54&quot;/&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Öffentliche Apotheke&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.performerType">performerType</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input">input</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>
                <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;1&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Health Care Provider Prescription&quot;/&gt;
      &lt;/<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.reference">reference</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;281a985c-f25b-4aae-91a6-41ad744080b0&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input">input</a>&gt;
  &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input">input</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.system">system</a>
                <a href="http://hl7.org/fhir/R4/datatypes.html#uri">value</a>=&quot;https://gematik.de/fhir/erp/CodeSystem/EFlowRxDocumentType&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;2&quot;/&gt;
        &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#Coding#Coding.display">display</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Patient Confirmation&quot;/&gt;
      &lt;/<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.coding">coding</a>&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input.type">type</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/references.html#Reference#Reference.reference">reference</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;f8c2298f-7c00-4a68-af29-8a2862d55d43&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input.value_x_">valueReference</a>&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/task.html#Task.input">input</a>&gt;
&lt;/<a href="http://hl7.org/fhir/R4/task.html#Task">Task</a>&gt;</code></pre>

    </div>
    <div data-name="application/fhir+json" data-type="JSON" data-render="ig-Fragment">
      <pre class="json" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-json" style="white-space: pre; text-wrap: nowrap;">{
  "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome">resourceType</a>" : "OperationOutcome",
  "<a href="http://hl7.org/fhir/R4/resource.html#OperationOutcome.id">id</a>" : "ExampleOperationActivateError",
  "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue">issue</a>" : [
    {
      "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.severity">severity</a>" : "error",
      "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.code">code</a>" : "invalid",
      "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.details">details</a>" : {
        "<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.text">text</a>" : "unknown or unexpected profile"
      },
      "<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.diagnostics">diagnostics</a>" : "Unable to determine profile type from name: https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Bundle"
    }
  ]
}</code></pre>

    </div>
    <div data-name="application/fhir+xml" data-type="XML" data-render="ig-Fragment">
      <pre class="xml" data-fhir="generated" style="white-space: pre; text-wrap: nowrap; width: auto;"><code class="language-xml" style="white-space: pre; text-wrap: nowrap;">
&lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome">OperationOutcome</a> xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;<a href="http://hl7.org/fhir/R4/resource.html#OperationOutcome.id">id</a> <a href="http://hl7.org/fhir/R4/datatypes.html#id">value</a>=&quot;ExampleOperationActivateError&quot;/&gt;
  &lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue">issue</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.severity">severity</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;error&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.code">code</a> <a href="http://hl7.org/fhir/R4/datatypes.html#code">value</a>=&quot;invalid&quot;/&gt;
    &lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.details">details</a>&gt;
      &lt;<a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept#CodeableConcept.text">text</a> <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;unknown or unexpected profile&quot;/&gt;
    &lt;/<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.details">details</a>&gt;
    &lt;<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue.diagnostics">diagnostics</a>
                 <a href="http://hl7.org/fhir/R4/datatypes.html#string">value</a>=&quot;Unable to determine profile type from name: https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Bundle&quot;/&gt;
  &lt;/<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome.issue">issue</a>&gt;
&lt;/<a href="http://hl7.org/fhir/R4/operationoutcome.html#OperationOutcome">OperationOutcome</a>&gt;</code></pre>

    </div>
  </div>
</div>

<h2 id="geschäftslogik">Geschäftslogik</h2>

<p>Die Aktivierung folgt einem streng sequenziellen Prüfpfad:</p>

<ol>
  <li><strong>Authentisierung und Statusprüfung:</strong> AccessCode, optional Secret und Taskstatus <code class="language-plaintext highlighter-rouge">draft</code> bilden die Eintrittskriterien. Verletzungen führen zu 403.</li>
  <li><strong>Identitäts- und Attributvalidierungen:</strong> IKNR, alternative Kostenträger-IDs, KVNR (Patient), LANR/ZANR (Performer) und PZN werden mit den jeweiligen Prüfziffern kontrolliert. Zusätzlich gelten Flowtype-spezifische Constraints (Coverage-Typ, T-Rezept Medication category).</li>
  <li><strong>Mehrfachverordnungslogik:</strong> Für Kennzeichnung <code class="language-plaintext highlighter-rouge">Mehrfachverordnung=true</code> prüft der Fachdienst Numerator/Denominator, Datumsfenster und Rechtsgrundlage. Entlass-/Ersatzrezepte sowie unvollständige Zeiträume werden abgewiesen.</li>
  <li><strong>QES- und Schemaprüfung:</strong> Der PKCS#7-Datensatz wird gegen ETSI/QES-Regeln validiert; das eingebettete Bundle muss KBV-konform sein. OCSP-Fehler resultieren in HTTP 512.</li>
  <li><strong>Persistenz und Ableitungen:</strong> Bei Erfolg speichert der Fachdienst QES und serversigniertes Bundle, übernimmt KVNR und performerType in den Task, setzt <code class="language-plaintext highlighter-rouge">Task.status = ready</code>, ermittelt EU-Einlösbarkeit und stellt Daten für den ePA Medication Service bereit ([A_25925]).</li>
  <li><strong>Benachrichtigungen:</strong> Es erfolgt eine Push Notification <code class="language-plaintext highlighter-rouge">erp.task.activate</code> an das E-Rezept-FdV sowie Logging/Audit nach Vorgabe ([A_28126]).</li>
</ol>

<p>&lt;?xml version=”1.0” encoding=”us-ascii” standalone=”no”?&gt;<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="951px" preserveAspectRatio="none" style="width:820px;height:951px;background:#FFFFFF;" version="1.1" viewBox="0 0 820 951" width="820px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="207" x="305" y="32.9951">IG-ERP-BL-TASK-ACTIVATE</text><ellipse cx="413.25" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="453" x="186.75" y="87.2969"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="433" x="196.75" y="108.4355">Receive POST /Task/{id}/$activate with AccessCode and PKCS#7 QES</text><polygon fill="#F1F1F1" points="264.25,141.2656,562.25,141.2656,574.25,153.2656,562.25,165.2656,264.25,165.2656,252.25,153.2656,264.25,141.2656" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="298" x="264.25" y="157.0737">AccessCode matches Task &amp;&amp; Task.status = draft?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="232.25" y="150.6714">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="574.25" y="150.6714">no</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="231" x="126.75" y="175.2656"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="211" x="136.75" y="196.4043">Extract KBV bundle and metadata</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="381.25" y="175.2656"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="386" x="391.25" y="196.4043">Return OperationOutcome 403 (invalid AccessCode or status)</text><ellipse cx="584.25" cy="240.2344" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"></ellipse><ellipse cx="584.25" cy="240.2344" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"></ellipse><polygon fill="#F1F1F1" points="303.25,271.2344,523.25,271.2344,535.25,283.2344,523.25,295.2344,303.25,295.2344,291.25,283.2344,303.25,271.2344" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="220" x="303.25" y="287.0425">Validate IKNR, KVNR, LANR/ZANR, PZN?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="278.25" y="280.6401">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="535.25" y="280.6401">error</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="388" x="31.25" y="305.2344"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="368" x="41.25" y="326.373">Check Flowtype constraints (Coverage type, BtM exclusion)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="324" x="439.25" y="305.2344"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="304" x="449.25" y="326.373">Return OperationOutcome 400 (identifier failure)</text><ellipse cx="601.25" cy="370.2031" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"></ellipse><ellipse cx="601.25" cy="370.2031" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"></ellipse><polygon fill="#F1F1F1" points="308.75,401.2031,517.75,401.2031,529.75,413.2031,517.75,425.2031,308.75,425.2031,296.75,413.2031,308.75,401.2031" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="209" x="308.75" y="417.0112">Mehrfachverordnung rules satisfied?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="283.75" y="410.6089">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="529.75" y="410.6089">error</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="420" x="11" y="435.2031"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="400" x="21" y="456.3418">Validate QES signature (ETSI), OCSP status and ASN.1 structure</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="309" x="451" y="435.2031"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="289" x="461" y="456.3418">Return OperationOutcome 400 (MVO violation)</text><ellipse cx="605.5" cy="500.1719" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"></ellipse><ellipse cx="605.5" cy="500.1719" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"></ellipse><polygon fill="#F1F1F1" points="342.75,531.1719,483.75,531.1719,495.75,543.1719,483.75,555.1719,342.75,555.1719,330.75,543.1719,342.75,531.1719" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="342.75" y="546.98">QES + KBV bundle valid?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13" x="317.75" y="540.5776">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="495.75" y="540.5776">error</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="300" x="68.5" y="565.1719"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="280" x="78.5" y="586.3105">Persist QES + generate serversigned bundle</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="337" x="50" y="619.1406"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="317" x="60" y="640.2793">Set Task.for, performerType, eu-isRedeemable flag</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="133" y="673.1094"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="143" y="694.248">Set Task.status = ready</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="273" x="82" y="727.0781"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="253" x="92" y="748.2168">Prepare data for ePA Medication Service</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="283" x="77" y="781.0469"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="263" x="87" y="802.1855">Trigger push notification erp.task.activate</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="106" y="835.0156"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="205" x="116" y="856.1543">Return updated Task (HTTP 200)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="402" x="407" y="565.1719"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="382" x="417" y="586.3105">Return OperationOutcome 400/512 (signature/schema error)</text><polygon fill="#F1F1F1" points="413.25,874.9844,425.25,886.9844,413.25,898.9844,401.25,886.9844,413.25,874.9844" style="stroke:#181818;stroke-width:0.5;"></polygon><ellipse cx="413.25" cy="929.9844" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"></ellipse><ellipse cx="413.25" cy="929.9844" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"></ellipse><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="67.2969" y2="87.2969"></line><polygon fill="#181818" points="409.25,77.2969,413.25,87.2969,417.25,77.2969,413.25,81.2969" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="584.25" x2="584.25" y1="209.2344" y2="229.2344"></line><polygon fill="#181818" points="580.25,219.2344,584.25,229.2344,588.25,219.2344,584.25,223.2344" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="252.25" x2="242.25" y1="153.2656" y2="153.2656"></line><line style="stroke:#181818;stroke-width:1.0;" x1="242.25" x2="242.25" y1="153.2656" y2="175.2656"></line><polygon fill="#181818" points="238.25,165.2656,242.25,175.2656,246.25,165.2656,242.25,169.2656" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="574.25" x2="584.25" y1="153.2656" y2="153.2656"></line><line style="stroke:#181818;stroke-width:1.0;" x1="584.25" x2="584.25" y1="153.2656" y2="175.2656"></line><polygon fill="#181818" points="580.25,165.2656,584.25,175.2656,588.25,165.2656,584.25,169.2656" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="242.25" x2="242.25" y1="209.2344" y2="256.2344"></line><line style="stroke:#181818;stroke-width:1.0;" x1="242.25" x2="413.25" y1="256.2344" y2="256.2344"></line><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="256.2344" y2="271.2344"></line><polygon fill="#181818" points="409.25,261.2344,413.25,271.2344,417.25,261.2344,413.25,265.2344" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="121.2656" y2="141.2656"></line><polygon fill="#181818" points="409.25,131.2656,413.25,141.2656,417.25,131.2656,413.25,135.2656" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="601.25" x2="601.25" y1="339.2031" y2="359.2031"></line><polygon fill="#181818" points="597.25,349.2031,601.25,359.2031,605.25,349.2031,601.25,353.2031" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="291.25" x2="225.25" y1="283.2344" y2="283.2344"></line><line style="stroke:#181818;stroke-width:1.0;" x1="225.25" x2="225.25" y1="283.2344" y2="305.2344"></line><polygon fill="#181818" points="221.25,295.2344,225.25,305.2344,229.25,295.2344,225.25,299.2344" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="535.25" x2="601.25" y1="283.2344" y2="283.2344"></line><line style="stroke:#181818;stroke-width:1.0;" x1="601.25" x2="601.25" y1="283.2344" y2="305.2344"></line><polygon fill="#181818" points="597.25,295.2344,601.25,305.2344,605.25,295.2344,601.25,299.2344" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="225.25" x2="225.25" y1="339.2031" y2="386.2031"></line><line style="stroke:#181818;stroke-width:1.0;" x1="225.25" x2="413.25" y1="386.2031" y2="386.2031"></line><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="386.2031" y2="401.2031"></line><polygon fill="#181818" points="409.25,391.2031,413.25,401.2031,417.25,391.2031,413.25,395.2031" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="605.5" x2="605.5" y1="469.1719" y2="489.1719"></line><polygon fill="#181818" points="601.5,479.1719,605.5,489.1719,609.5,479.1719,605.5,483.1719" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="296.75" x2="221" y1="413.2031" y2="413.2031"></line><line style="stroke:#181818;stroke-width:1.0;" x1="221" x2="221" y1="413.2031" y2="435.2031"></line><polygon fill="#181818" points="217,425.2031,221,435.2031,225,425.2031,221,429.2031" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="529.75" x2="605.5" y1="413.2031" y2="413.2031"></line><line style="stroke:#181818;stroke-width:1.0;" x1="605.5" x2="605.5" y1="413.2031" y2="435.2031"></line><polygon fill="#181818" points="601.5,425.2031,605.5,435.2031,609.5,425.2031,605.5,429.2031" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="221" x2="221" y1="469.1719" y2="516.1719"></line><line style="stroke:#181818;stroke-width:1.0;" x1="221" x2="413.25" y1="516.1719" y2="516.1719"></line><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="516.1719" y2="531.1719"></line><polygon fill="#181818" points="409.25,521.1719,413.25,531.1719,417.25,521.1719,413.25,525.1719" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="599.1406" y2="619.1406"></line><polygon fill="#181818" points="214.5,609.1406,218.5,619.1406,222.5,609.1406,218.5,613.1406" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="653.1094" y2="673.1094"></line><polygon fill="#181818" points="214.5,663.1094,218.5,673.1094,222.5,663.1094,218.5,667.1094" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="707.0781" y2="727.0781"></line><polygon fill="#181818" points="214.5,717.0781,218.5,727.0781,222.5,717.0781,218.5,721.0781" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="761.0469" y2="781.0469"></line><polygon fill="#181818" points="214.5,771.0469,218.5,781.0469,222.5,771.0469,218.5,775.0469" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="815.0156" y2="835.0156"></line><polygon fill="#181818" points="214.5,825.0156,218.5,835.0156,222.5,825.0156,218.5,829.0156" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="330.75" x2="218.5" y1="543.1719" y2="543.1719"></line><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="543.1719" y2="565.1719"></line><polygon fill="#181818" points="214.5,555.1719,218.5,565.1719,222.5,555.1719,218.5,559.1719" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="495.75" x2="608" y1="543.1719" y2="543.1719"></line><line style="stroke:#181818;stroke-width:1.0;" x1="608" x2="608" y1="543.1719" y2="565.1719"></line><polygon fill="#181818" points="604,555.1719,608,565.1719,612,555.1719,608,559.1719" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="218.5" y1="868.9844" y2="886.9844"></line><line style="stroke:#181818;stroke-width:1.0;" x1="218.5" x2="401.25" y1="886.9844" y2="886.9844"></line><polygon fill="#181818" points="391.25,882.9844,401.25,886.9844,391.25,890.9844,395.25,886.9844" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="608" x2="608" y1="599.1406" y2="886.9844"></line><line style="stroke:#181818;stroke-width:1.0;" x1="608" x2="425.25" y1="886.9844" y2="886.9844"></line><polygon fill="#181818" points="435.25,882.9844,425.25,886.9844,435.25,890.9844,431.25,886.9844" style="stroke:#181818;stroke-width:1.0;"></polygon><line style="stroke:#181818;stroke-width:1.0;" x1="413.25" x2="413.25" y1="898.9844" y2="918.9844"></line><polygon fill="#181818" points="409.25,908.9844,413.25,918.9844,417.25,908.9844,413.25,912.9844" style="stroke:#181818;stroke-width:1.0;"></polygon></g></svg></p>

<h2 id="sicherheitsanforderungen">Sicherheitsanforderungen</h2>

<p>Zusätzlich zu den allgemeinen Vorgaben gelten:</p>

<ul>
  <li>Zugriffe ohne gültigen AccessCode werden verworfen; bei Fehlversuchen greift die Brute-Force-Drosselung via HTTP-Header <code class="language-plaintext highlighter-rouge">Warning</code> und künstlicher Verzögerung ([A_20703]).</li>
  <li>Der QES muss mit einer nicht gesperrten HBA-Identität erstellt worden sein; OCSP-Prüfungen sind verpflichtend und Timeout führt zu HTTP 512 ([A_20159-04]).</li>
  <li>Der Payload darf keine Betäubungsmittel enthalten, solange der Workflow dies nicht explizit vorsieht ([A_22231]).</li>
  <li>Erfolgreiche Aktivierungen lösen Push-Nachrichten aus, wodurch Versicherte über neue offene Verordnungen informiert werden ([A_28126]).</li>
</ul>

<p>Weitere Sicherheitsgrundlagen sind im Dokument <a href="./menu-schnittstellen-datenschutz-und-sicherheit.html">menu-schnittstellen-datenschutz-und-sicherheit.html</a> beschrieben.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025+ <a style="color:var(--footer-hyperlink-text-color)" href="https://gematik.de">gematik GmbH</a>.  Paket de.gematik.eflow-rx#1.0.0-draft basierend auf <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generiert <span title="Thu, Feb 12, 2026 06:52+0000">2026-02-12</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

